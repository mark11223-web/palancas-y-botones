<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Escape room digital: "palancas y botones"</title>
  <style>

  </style>
</head>
<body>
  <label style="display: none;" id="llave"><p style="position: fixed; top: 125px; left: 45%; font-size: 40px;">üîë</p></label>
  <label style="display: none;" id="superllave"><p style="position: fixed; top: 175px; left: 45%; font-size: 40px;">üóù</p></label>
  <button id="invent" style="font-size: 35px; cursor: pointer; padding: 15px 15px; border-radius: 40px; border: 2px outset white; position: absolute; top: 0; right: 0;">üéí</button>
  <button id="butpass1" onclick="respass1()" style="position: fixed; left: 50%; top: 75px; background-color: goldenrod; border: 2px solid brown; border-radius: 10px; padding: 10px 20px; font-weight: bold; cursor: not-allowed;">Contrase√±a</button>
  <button onclick="sumakey()" style="position: fixed; left: 35%; top: 75px; background-color: goldenrod; border: 2px solid brown; border-radius: 10px; padding: 10px 20px; font-weight: bold; cursor: pointer;" id="sumallave">Cofre</button>
  <label id="cosn" style="border-radius: 10px; border: 2px outset gray; background: gray; position: absolute; top: 80px; right: 1px; display: none;"><p style="font-size: 20px;" id="cos"></p></label>
  <input id="pass1" type="number" style="position: fixed; width: 150px;left: 35%; top: 175px; display: none;" placeholder="Escriba la contrase√±a...">
  <button onclick="final()" id="comp" style="background-color: darkorange; border: 2px solid saddlebrown; border-radius: 12px; padding: 6px 12px; font-weight: bold; color: white;cursor: pointer; box-shadow: 2px 2px 6px rgba(0,0,0,0.3); transition: all 0.3s ease; display: none; cursor: pointer; position: fixed; top: 170px; left: 58%;">Comprobar</button>
  <p id="resfin" style="display: none; position: fixed; left: 35%; top: 225px;">La contrase√±a es 412</p>
  <p id="fin" style="display: none; font-size: 75px; color: yellow; position: fixed; top: 50px; left: 100px;">HAS ESCAPADO DEL ESCAPE ROOM</p>

  <script>
    const contra1 = document.getElementById('pass1');
    const key = document.getElementById('llave');
    const superkey = document.getElementById('superllave');
    const invent = document.getElementById('invent');
    const butpass1 = document.getElementById('butpass1');
    const comp = document.getElementById('comp');
    let cosas = [];
    let moch_close = 0;
    const moch_open = document.getElementById('cosn');
    const cos = document.getElementById('cos');
    let hecho = 0;
    let hecho_b = 1;

    key.addEventListener('click', desaparece);
    superkey.addEventListener('click', desaparece_b);
    invent.addEventListener('click', moch);

    function desaparece() {
      key.style.display = "none";
      cosas.push("llaveüîë");
      cos.innerHTML = cosas.join(", ");
      butpass1.style.cursor = "pointer";
    }
    
    function desaparece_b() {
      superkey.style.display = "none";
      cosas.push("superllaveüóù");
      cos.innerHTML = cosas.join(", ");
      hecho = 3;
      hecho_b = 3;
    }

    function moch() {
      if (moch_close == 0) {
        moch_close = 1; 
      } else {
        moch_close = 0; 
      } 
      
      if (moch_close == 1) {
        moch_open.style.display = "block"; 
        
      } else {
        moch_open.style.display = "none"; 
        
      }
    }
    
    function sumakey() {
      if (hecho == 0) {
        let sumarara = window.prompt("Si quiere la llave, por favor, diga cuanto es 5x8x3+4+16√∑2-4: ");
        if (sumarara == "128") {
          alert("Muy bien, felicidades, aqu√≠ tiene la llave");
          key.style.display = "block";
          hecho++;
        } else {
          alert("Incorrecto, vuelva a intentarlo...");
        }
    } else if (hecho == 2) {
      let shh = window.prompt("Acuerdese del numero que puso antes, y vuelvalo a introducir, le daremos una super-llave: ");
      if (shh == "128") {
      superkey.style.display = "block";
      contra1.style.display = "none";
      comp.style.display = "none";
      } else {
        alert("No est√°s atento...");
      }
     } else {
       alert("Ya tiene la llave.");
     }
    }    
      function respass1() {
        if (cosas.length == 1) {
          if (hecho !== 3) {
            contra1.style.display = "block";
            comp.style.display = "block";
            hecho = 2;
            quit(cosas, "llaveüîë")
            cos.innerHTML = cosas.join(", ");
          } else {
            contra1.style.display = "block";
            resfin.style.display = "block";
            comp.style.display = "block";
            quit(cosas, "superllaveüóù")
            cos.innerHTML = cosas.join(", ");
          }
        }
      }
      
      function quit(array, valor) {
  let index = array.indexOf(valor);
  if (index !== -1) {
    array.splice(index, 1);
  }
}

    function final() {
      if (hecho_b == 1) {
        if (contra1.value == "412") {
        pass1.style.display = "none"
        resfin.style.display = "none"
        sumallave.style.display = "none"
        butpass1.style.display = "none"
        invent.style.display = "none"
        comp.style.display = "none";
        fin.style.display = "block"
      } else {
        alert("Incorrecto");
      } 
      } else {
      if (pass1.value == "412") {
        pass1.style.display = "none"
        resfin.style.display = "none"
        sumallave.style.display = "none"
        butpass1.style.display = "none"
        invent.style.display = "none"
        comp.style.display = "none";
        fin.style.display = "block"
      } else {
        alert("¬ø¬°Pero que est√°s haciendo!?, si te estoy diciendo la contrase√±a...")
      }
      }
    }
  </script>
</body>
</html>
